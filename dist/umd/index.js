(function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,b.Readometer=a()}})(function(){return function(){function b(d,e,g){function a(j,i){if(!e[j]){if(!d[j]){var f="function"==typeof require&&require;if(!i&&f)return f(j,!0);if(h)return h(j,!0);var c=new Error("Cannot find module '"+j+"'");throw c.code="MODULE_NOT_FOUND",c}var k=e[j]={exports:{}};d[j][0].call(k.exports,function(b){var c=d[j][1][b];return a(c||b)},k,k.exports,b,d,e,g)}return e[j].exports}for(var h="function"==typeof require&&require,c=0;c<g.length;c++)a(g[c]);return a}return b}()({1:[function(a,b){function c(){this.regexes={}}c.prototype.addKit=function(h,a=null,b=null){const c=this;let d=null,i=null,j=null;if("string"==typeof h)d=h,i=a,j=b;else if("[object Object]"===Object.prototype.toString.call(h))d=h.name,i=h.items,j=h.opts;else return;if(!("string"!=typeof d||d in c)&&"[object Object]"!==!Object.prototype.toString.call(i)){const e=Object.keys(i);if(!(1>e.length)){const f=e.filter(function(b){return"function"==typeof i[b]&&"string"==typeof b&&!(b in c)});if(f&&!(1>f.length)){c[d]={name:d,items:[],addItem:function(e,a){if(!("string"!=typeof e||e in c))return"function"==typeof a?(c[e]=a.bind(c),-1===c[d].items.indexOf(e)&&c[d].items.push(e),!0):void 0},updateItem:function(e,a){"string"!=typeof e||"function"!=typeof a||(c[e]=a.bind(c),-1===c[d].items.indexOf(e)&&c[d].items.push(e))},removeItem:function(b){if(!(!b in c))return delete c[b],c[d].items.splice(c[d].items.indexOf(b),1),!0}};for(let b=0;b<f.length;b++)c[d].addItem(f[b],i[f[b]]);return"[object Object]"===Object.prototype.toString.call(j)&&"[object Object]"===Object.prototype.toString.call(j.regexes)&&Object.keys(j.regexes).map(function(d){const a=j.regexes[d];a instanceof RegExp&&(c.regexes[d]=j.regexes[d])}),!0}}}},c.prototype.updateKit=function(e,a){if(!(!e in this)){const b=Object.keys(a);for(let c=0;c<b.length;c++)this[e].updateItem(b[c],a[b[c]]);return!0}},b.exports=new c},{}],2:[function(a,b){b.exports={name:"dom",items:{setDOMGlobal:function(a,b){if(-1===["window","document"].indexOf(a))return;const c=a.slice(0,1).toUpperCase()+a.slice(1);return this["DOMGlobal"+c]=b,!0},checkDOMGlobals:function(){const a=["window","document"],b="DOMGlobal";for(let c=0;c<a.length;c++){const d=a[c],e=d.slice(0,1).toUpperCase()+d.slice(1);"undefined"==typeof this[b+e]&&(this[b+e]="window"==d?window:"document"==d?document:void 0)}return!0},getViewportDimensions:function(){this.checkDOMGlobals();const b=this.DOMGlobalWindow,c=this.DOMGlobalDocument,d=!("innerWidth"in b),f=d?b:c.documentElement||c.body,e=d?"inner":"client";return{width:f[e+"Width"],height:f[e+"Height"]}}}}},{}],3:[function(a,b){b.exports={name:"error",items:{objectifyError:function(a){const b=JSON.stringify(a,Object.getOwnPropertyNames(a)),c=JSON.parse(b);return c.stack=c.stack.split(/[\n]/g),c},stringifyError:function(a){return JSON.stringify(this.objectifyError(a))}}}},{}],4:[function(a,b){b.exports={name:"function",items:{waitForIt:function(a,b,c=300,d=1e4){let e=setInterval(function(){!0===a.call()&&(clearInterval(e),b.call())},c);setTimeout(function(){e&&(clearInterval(e),b.call(null,!1))},d)},throttle:function(a,b,c){let d=!0,e=!0;if("function"!=typeof a)throw new TypeError("Invalid debounce function.");return"[object Object]"===Object.prototype.toString.call(c)&&(d="leading"in c?!!c.leading:d,e="trailing"in c?!!c.trailing:e),this.debounce(a,b,{leading:d,maxWait:b,trailing:e})},debounce:function(a,b,c){var m=Math.max;function d(b){let c=n,d=o;return n=o=void 0,t=b,q=a.apply(d,c),q}function e(a){return t=a,r=setTimeout(h,b),u?d(a):q}function f(a){var c=Math.min;let d=a-s,e=a-t,f=b-d;return v?c(f,p-e):f}function g(a){let c=a-s,d=a-t;return void 0===s||c>=b||0>c||v&&d>=p}function h(){let a=Date.now();return g(a)?i(a):void(r=setTimeout(h,f(a)))}function i(a){return(r=void 0,w&&n)?d(a):(n=o=void 0,q)}function j(){void 0!==r&&clearTimeout(r),t=0,n=s=o=r=void 0}function k(){return void 0===r?q:i(Date.now())}function l(){let a=Date.now(),c=g(a);if(n=arguments,o=this,s=a,c){if(void 0===r)return e(s);if(v)return r=setTimeout(h,b),d(s)}return void 0===r&&(r=setTimeout(h,b)),q}let n,o,p,q,r,s,t=0,u=!1,v=!1,w=!0;if("function"!=typeof a)throw new TypeError("Invalid debounce function.");return b=parseFloat(b)||0,"[object Object]"===Object.prototype.toString.call(c)&&(u=!!c.leading,v="maxWait"in c,p=v?m(parseFloat(c.maxWait)||0,b):p,w="trailing"in c?!!c.trailing:w),l.cancel=j,l.flush=k,l},stringify:function(a){return this.isError(a)?this.stringifyError(a):this.isObject(a)||this.isArray(a)?JSON.stringify(a):this.isString(a)?a:this.isNumber(a)?a.toString():this.isDate(a)?a.toISOString():this.isDOMElement(a)&&a.innerText?a.innerText:""}},dependencies:["type","error"]}},{}],5:[function(a,b){b.exports={name:"object",items:{getProp:function(a,b,c=void 0){if(!this.isObject(a))return c;if(this.isString(b))b=[b];else if(!this.isArray(b))return c;if(1>b.length)return c;let d=0;for(const e=b.length;this.isObject(a)&&d<e;)a=a[b[d]],d+=1;return this.isUndefined(a)?c:a},removeProp:function(a,b){if(this.isObject(a)){const c=Object.keys(a);return-1===c.indexOf(b)?a:c.reduce(function(c,d){return d!=b&&(c[d]=a[d]),c},{})}}},opts:{dependencies:["type"]}}},{}],6:[function(a,b){b.exports={name:"type",items:{isString:function(a){return"string"==typeof a},isObject:function(a){return"[object Object]"===Object.prototype.toString.call(a)},isArray:function(a){return Array.isArray(a)},isPromise:function(a){return!!(a&&"function"==typeof a.then)},isError:function(a){return a instanceof Error},isDate:function(a){return a instanceof Date},isFunction:function(a){return"function"==typeof a},isNull:function(a){return null===a},isUndefined:function(a){return"undefined"==typeof a},isNumber:function(a){return"number"==typeof a&&!0===Number.isFinite(a)},isInteger:function(a){return Number.isInteger(a)},isNan:function(a){return"number"==typeof a&&a!=+a},isRegExp:function(a){return a instanceof RegExp},isBoolean:function(a){return!0===a||!1===a},isBigInt:function(a){return"bigint"==typeof a},isSymbol:function(a){return"symbol"==typeof a},isDOMElement:function(a){return!!(a&&(a.nodeName||a.prop&&a.attr&&a.find))},getType:function(a){return this.isObject(a)?"object":this.isArray(a)?"array":this.isPromise(a)?"promise":this.isError(a)?"error":this.isDate(a)?"date":this.isNull(a)?"null":this.isUndefined(a)?"undefined":this.isFunction(a)?"function":this.isNumber(a)?"number":this.isNan(a)?"nan":this.isRegExp(a)?"regexp":this.isString(a)?"string":this.isBoolean(a)?"boolean":this.isBigInt(a)?"bigint":this.isSymbol(a)?"symbol":this.isDOMElement(a)?"domelement":"none"}}}},{}],7:[function(a,b){b.exports={name:"validator",items:{isEmpty:function(a){return this.isObject(a)?this.isEqual({},a):this.isArray(a)?0===a.length:!!this.isNull(a)||!!this.isUndefined(a)||(this.isNumber(a)?this.isEqual(0,a):!!this.isNan(a)||(this.isString(a)?this.isEqual("",a):!!this.isBoolean(a)&&this.isEqual(!1,a)))},isNotEmpty:function(a){return!0!==this.isEmpty(a)},isEqual:function(a,b){if(a===b)return!0;if(null===a||null===b)return!1;const c=this.getType(a),d=this.getType(b);if(c!=d)return!1;switch(c){case"object":const d=Object.keys(a),e=Object.keys(b),f=d.length;if(f!==e.length)return!1;for(let c=0;c<f;c++){const f=d[c];if(-1===e.indexOf(f))return!1;if(!this.isEqual(a[f],b[f]))return!1}return!0;break;case"array":const g=a.length;if(g!==b.length)return!1;for(let c=0;c<g;c++)if(!this.isEqual(a[c],b[c]))return!1;return!0;break;case"error":const h=this.objectifyError(a),i=this.objectifyError(b);return this.isEqual(h,i);break;case"date":return a.getTime()===b.getTime();break;case"undefined":return!0;break;case"number":case"nan":case"string":case"boolean":case"domelement":return a===b;break;case"regexp":return a.toString()===b.toString();break;default:return!1;}},isUUID:function(a){return this.regexes.uuid.test(a)},isEmail:function(a){return this.regexes.email.test(a)},isURL:function(a,b={}){if("string"!=typeof a)return!1;b=Object.assign({},{allowLocal:!1,allowDataUrl:!1,schemes:["http","https"]},b);const{allowLocal:c,allowDataUrl:d,schemes:e}=b;let f="^(?:(?:"+e.join("|")+")://)(?:\\S+(?::\\S*)?@)?(?:",g="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))";if(c?g+="?":f+="(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})",f+="(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*"+g+")(?::\\d{2,5})?(?:[/?#]\\S*)?$",d){f="(?:"+f+")|(?:^"+("data:(?:\\w+\\/[-+.\\w]+(?:;[\\w=]+)*)?(?:;base64)?,"+"[A-Za-z0-9-_.!~\\*'();\\/?:@&=+$,%]*")+"$)"}const h=new RegExp(f,"i");return!!h.test(a)}},opts:{dependencies:["type","error"],regexes:{uuid:/[a-zA-Z0-9]{8}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{12}/g,email:/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i}}}},{}],8:[function(a,b){function c(d){const e=d||{},a=Object.keys(e);this._events=0<a.length?a.reduce(function(b,a){return b[a]=Array.isArray(e[a])?e[a]:[e[a]],b},{}):{}}c.prototype._eventsWillBeFiredOnce={},c.prototype.on=function(f,a,b=null){if("function"!=typeof a||"string"!=typeof f)return!1;this._events.hasOwnProperty(f)||(this._events[f]=[]),this._eventsWillBeFiredOnce.hasOwnProperty(f)||(this._eventsWillBeFiredOnce[f]=[]);const c="[object Object]"===Object.prototype.toString.call(b)?b:{once:!1},d=this._events[f].push(a);return c.once&&!0===c.once&&this._eventsWillBeFiredOnce[f].push(d-1),!0},c.prototype.once=function(c,a){return this.on(c,a,{once:!0})},c.prototype.emit=function(e,f=[]){if(!this._events.hasOwnProperty(e)){if("error"==e){const b=f instanceof Error?f:new Error("Unhandled error.");throw b}return!1}const a=Array.isArray(f)?f:[f];for(let b=0;b<this._events[e].length;b++)this._events[e][b].apply(this,a);if(this._eventsWillBeFiredOnce.hasOwnProperty(e))for(var b=0;b<this._eventsWillBeFiredOnce[e].length;b++)this.removeListener(e,this._eventsWillBeFiredOnce[e][b]);return!0},c.prototype.removeListener=function(c,a){this._events[c].splice(a,1)},c.prototype.removeListeners=function(b){return"string"==typeof b&&!!this._events.hasOwnProperty(b)&&(this._events[b]=[],this._eventsWillBeFiredOnce.hasOwnProperty(b)&&(this._eventsWillBeFiredOnce[b]=[]),!0)},c.prototype.flushEventEmitter=function(){this._events={},this._eventsWillBeFiredOnce={}},b.exports=c},{}],9:[function(a,b){function c(a={}){function b(){const a=i[m];a!=g.value&&(g.value=a,f.emit("update"))}function c(){"visible"!=g.value&&(g.value="visible",f.emit("update"))}function e(){"hidden"!=g.value&&(g.value="hidden",f.emit("update"))}const f=new d({}),g={started:!1,value:"visible"},h=a.hasOwnProperty("window")?a.window:window,i=a.hasOwnProperty("document")?a.document:document,j=["webkit","ms","o","moz","khtml"].filter(a=>a+"Hidden"in i),k=j&&0<j.length?j[0]:"",l=k+(0<k.length?"H":"h")+"idden",m=k+(0<k.length?"V":"v")+"isibilityState",n=l in i?"modern":i.addEventListener?"focus-blur":"focus-blur-ie";return{emitter:f,start:function(){!0===g.started||("modern"==n?i.addEventListener(k+"visibilitychange",b,0):"focus-blur"==n?(h.addEventListener("focus",c,!0),h.addEventListener("blur",e,!0)):"focus-blur-ie"==n&&(i.attachEvent("onfocusin",c),i.attachEvent("onfocusout",e)),g.started=!0)},pause:function(){!1===g.started||("modern"==n?i.removeEventListener(k+"visibilitychange",b,1):"focus-blur"==n?(h.removeEventListener("focus",c,!0),h.removeEventListener("blur",e,!0)):"focus-blur-ie"==n&&(i.detachEvent("onfocusin",c),i.detachEvent("onfocusout",e)),g.started=!1)},getState:function(){return g.value}}}const d=a("event-emitter-object");b.exports=c},{"event-emitter-object":8}],10:[function(a,b){var d=Math.ceil;function c(){e.call(this,{}),this.isWindowVisible=!0,this.visibilityStateListener=n(),this.visibilityStateListener.start(),this.visibilityStateListener.emitter.on("update",function(){this.isWindowVisible="visible"==this.visibilityStateListener.getState()}.bind(this))}const e=a("event-emitter-object"),f=a("@basekits/core"),g=a("@basekits/kit-type"),h=a("@basekits/kit-object"),i=a("@basekits/kit-error"),j=a("@basekits/kit-validator"),k=a("@basekits/kit-dom"),l=a("@basekits/kit-function");f.addKit(g),f.addKit(h),f.addKit(i),f.addKit(j),f.addKit(k),f.addKit(l);const m=a("./readingSpeedsByLanguage"),n=a("./createVisibilityStateListener");c.prototype=Object.create(e.prototype),c.prototype.constructor=c,c.prototype.clearMemory=function(a){this.element=a,this.progress=0,this.reading=!1,this.readingTime=0,this.targetReadingTime=0,this.milestones=[],this.absMilestones=[],this.distance=this.getElementDistanceFromTop(this.element),this.hasScroll=null,this.viewport=f.getViewportDimensions(),this.lastTimestamp=0,this.timeInterval=null},c.prototype.start=function(a,b="default"){var c=Math.floor;if(!f.isDOMElement(a))return;this.clearMemory(a);const d=f.getProp(m,b,"default"),e=this.element.innerText.split(" ").filter(a=>1<a.length);this.targetReadingTime=c(60*(e.length/d));const g=this.element.scrollHeight,h=this.element.clientHeight;this.hasScroll=g!==h;const j=this.viewport.height<h?this.viewport.height:h,k=this.hasScroll?0:this.distance;for(let d=1;d<=c(g/j);d++)this.milestones.push(k+j*d);return(this.hasScroll||h>this.viewport.height)&&this.milestones.push(k+g),this.absMilestones=[].concat(this.milestones),this.onScroll(),this.hasScroll?this.element.onscroll=f.debounce(this.onScroll.bind(this),300):window.onscroll=f.debounce(this.onScroll.bind(this),300),this.timeInterval=setInterval(()=>this.checkReadingTime(),1e3),this},c.prototype.onScroll=function(){const a=this.checkReadingTime();if(!a||0===this.milestones.length)return;const b=document.documentElement.scrollTop||document.body.scrollTop||0,c=this.viewport.height<this.element.clientHeight?this.viewport.height:this.element.clientHeight,d=this.hasScroll?this.element.scrollTop+c:b+this.viewport.height;d>=this.milestones[0]&&(this.milestones.shift(),this.checkProgress())},c.prototype.checkReadingTime=function(){const a=document.documentElement.scrollTop||document.body.scrollTop||0,b=this.distance-a,c=0<this.viewport.height-b,d=0<this.distance+this.element.clientHeight-a,e=!0===c&&!0===d&&!0===this.isWindowVisible,f=this.getTimestamp();return e?!1===this.reading?(this.lastTimestamp=f,this.reading=!0):!0===this.reading&&(this.readingTime+=f-this.lastTimestamp,this.lastTimestamp=f):!0===this.reading&&(this.readingTime+=f-this.lastTimestamp,this.reading=!1),this.checkProgress(),e},c.prototype.checkProgress=function(){const a=Number.parseFloat(100*((this.absMilestones.length-this.milestones.length)/this.absMilestones.length)),b=this.targetReadingTime,c=d(100*(this.readingTime/b));let e=0;e=c>=a?a:75<=a&&75<=c?c:50<=a&&50<=c?c:0,this.progress!==e&&e>this.progress&&(this.progress=e,this.emit("progress",d(this.progress)),100===d(this.progress)&&(clearInterval(this.timeInterval),this.timeInterval=null,this.hasScroll?this.element.onscroll=null:window.onscroll=null))},c.prototype.getTimestamp=function(){return d(Date.now()/1e3)},c.prototype.getElementDistanceFromTop=function(a){let b=a.offsetTop,c=a.parentElement;for(;f.isNotEmpty(c);)b+=c.offsetTop,c=c.parentElement;return b},b.exports=c},{"./createVisibilityStateListener":9,"./readingSpeedsByLanguage":11,"@basekits/core":1,"@basekits/kit-dom":2,"@basekits/kit-error":3,"@basekits/kit-function":4,"@basekits/kit-object":5,"@basekits/kit-type":6,"@basekits/kit-validator":7,"event-emitter-object":8}],11:[function(a,b){b.exports={default:180,ar:138,ch:158,nl:202,en:228,fi:161,fr:195,de:179,iw:187,it:188,jp:193,pl:166,pt:181,ru:184,sl:180,sp:218,sv:199,tr:166}},{}]},{},[10])(10)});